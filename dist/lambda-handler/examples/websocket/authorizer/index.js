"use strict";var a=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var s=Object.prototype.hasOwnProperty;var i=(e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})},y=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of l(t))!s.call(e,o)&&o!==n&&a(e,o,{get:()=>t[o],enumerable:!(r=c(t,o))||r.enumerable});return e};var u=e=>y(a({},"__esModule",{value:!0}),e);var d={};i(d,{handler:()=>p});module.exports=u(d);var p=async(e,t,n)=>{let r;try{console.log("auth log"),r=await m(e)}catch(o){return console.log("UNAUTHORISED",o),t.fail("Unauthorized")}return console.log("AUTHORISED",r),r},E=(e,t)=>({Version:"2012-10-17",Statement:[{Action:"execute-api:Invoke",Effect:e,Resource:t}]}),g=e=>{if(!e.type||e.type!=="REQUEST")throw new Error('Expected "event.type" parameter to have value "REQUEST"');let t=e.queryStringParameters?.key;if(!t)throw new Error('Expected "event.queryStringParameters.key" parameter to be set');return t},m=e=>{console.log(e);let t=g(e);return{principalId:"test",policyDocument:E("Allow","*"),context:{scope:"my-socket"}}};0&&(module.exports={handler});
